{"version":3,"sources":["boxer.js"],"names":[],"mappings":"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","file":"boxer.js","sourcesContent":["/* * * * * * * * * * * * * * * *\n * BOXER GAME                  *\n * Created by  John Hearn      *\n *             Max Jacobson    *\n *             Doug Popadince  *\n * CF201       Fall 2015       *\n * * * * * * * * * * * * * * * */\n\nlet mobile = false,\n    cellWidth;\nif( mobile ) cellWidth = 16;\nelse         cellWidth = 32;\n\nlet listenToKeystrokes = true;\n\n// old theme:\n// var wallURL = \"../img/RedBrick.png\";\n// var floorURL = \"../img/FloorTile.png\";\n// var crateURL = \"../img/WoodenCrate.png\";\n// var crateOnDotURL = \"../img/WoodenCrateOnDot.png\";\n// var dotsURL  = \"../img/DotTile.png\";\n// var spriteURL = \"../img/Sprite.gif\";\n\nconst crateURL = \"../img/boulder.png\";\nconst crateOnDotURL = \"../img/boulderondot.png\";\nconst wallURL = \"../img/dirt.png\";\nconst floorURL = \"../img/dirt2.png\";\nconst dotsURL  = \"../img/dirtDot.png\";\nconst spriteURL = \"../img/Sprite.gif\";\n\nconst pad = (num, size) => {\n\tlet s = num+\"\";\n\twhile (s.length < size) s = \"0\" + s;\n\treturn s;\n};\n\nconst removeClass = () => {\n\t$('#hiddenlist').removeClass('hide');\n\t$('#gameboyIMG').removeClass('hide');\n};\n\n\nconst welcomeBack = () => {\n\tlet name = JSON.parse( localStorage.getItem( \"Name\" ) );\n\tvar welcome = ('<p class=\"welcome\"> Welcome back, ' + name + '. To continue ' +\n\t\t\t\t\t'playing from your last game, click the Gameboy or the \"Play\" tab above. ' +\n\t\t\t\t\t'If you would like to start over, please clear your web data. </p>');\n\t$('.initialParagraphs').remove();\n\t$('#user').replaceWith(welcome);\n};\n\nfunction User() {\n\tthis.currentLevel = 0;\n\tthis.levelScores = { easy: [ ], hard: [ ] };\n\tthis.difficulty = \"easy\";\n\n\tthis.saveData = function() {\n\t\t// localStorage.setItem(\"Name\", JSON.stringify( this.name ) );\n\t\tlocalStorage.setItem(\"Level\", JSON.stringify( this.currentLevel ) );\n\t\tlocalStorage.setItem(\"Scores\", JSON.stringify( this.levelScores ) );\n\t\tlocalStorage.setItem(\"Difficulty\", JSON.stringify(this.difficulty ) );\n\t\tlocalStorage.setItem(\"Initialized\", JSON.stringify( 'true' ) );\n\t};\n\n\tthis.loadData = function() {\n\t\tthis.name = JSON.parse( localStorage.getItem( \"Name\" ) );\n\t\tthis.currentLevel = JSON.parse( localStorage.getItem( \"Level\" ) );\n\t\tthis.levelScores = JSON.parse( localStorage.getItem( \"Scores\" ) );\n\t\tthis.difficulty = JSON.parse( localStorage.getItem( \"Difficulty\" ) );\n\t};\n\n\n    this.init = function() {\n\t\t// My attempt to use Boolean() to cast our localStorage string\n\t\t// was returning true regardless of the value so I wrote my own.\n\t\tfunction castToBool(stringToCast) {\n\t\t    if( stringToCast === \"true\" ) {\n\t\t\t\treturn true;\n\t\t    } else if( stringToCast === \"false\" ) {\n\t\t\t\treturn false;\n\t\t    } else {\n\t\t\t\tconsole.log(\"You're attempt to cast \" + castToBool + \" to a boolean failed.\" );\n\t\t    }\n\t\t}\n\n\t\tthis.isInitialized = castToBool( JSON.parse(localStorage.getItem(\"Initialized\") ) );\n\t\t//console.log(localStorage.getItem(\"Initialized\"));\n\t\t//console.log(this.isInitialized);\n\n\n\t\tif ( !this.isInitialized ) {\n\t\t    console.log(\"false = \" + this.isInitialized + \" I'm not initialized.\");\n\t\t    for( let ii=0; ii < oldLevelData.easy.length; ii++ ) {\n\t\t\t\tthis.levelScores.easy[ii] = 0;\n\t\t    }\n\t\t    for( let ii=0; ii < oldLevelData.hard.length; ii++ ) {\n\t\t\t\tthis.levelScores.hard[ii] = 0;\n\t\t    }\n\t\t    this.saveData();\n\t\t} else {\n\t\t    //console.log( \"true = \" + this.isInitialized + \" I'm already initialized.\");\n\t\t    removeClass();\n\t\t    this.loadData();\n\t\t    welcomeBack();\n\t\t}\n    };\n}\n\nfunction Coord(tileType, tileURL) {\n    this.$div = $( '<div></div>' );\n    this.$img = $( '<img></img>' );\n    this.tile = tileType;\n    this.$img.attr( 'src', tileURL );\n    this.$div.append( this.$img );\n    this.hasCrate = false;\n\n    this.isADot = function() {\n\t\tif ( this.tile === \"dot\" ) {\n\t\t    return true;\n\t\t} else {\n\t\t    return false;\n\t\t}\n    };\n}\n\nfunction Crate( xy ) {\n    this.x = xy[0] * cellWidth;\n    this.y = xy[1] * cellWidth;\n    this.onDot = false;\n    this.$crateImg = $('<img></img>').attr('src', crateURL );\n}\n\nfunction Sprite( xy ) {\n    this.x = xy[0] * cellWidth;\n    this.y = xy[1] * cellWidth;\n    this.$img = $('<img></img>').attr('src', spriteURL );\n    this.stepCount = 0;\n}\n\nfunction GameBoard() {\n    this.winCondition = false;\n    this.coordinates = [];\n    this.crates = [];\n\n    this.$canvasJQ = $('<canvas></canvas>');\n    this.canvas = this.$canvasJQ[0];\n    this.context = this.canvas.getContext(\"2d\");\n\n    this.$elementJQ = $('<section></section>').attr( 'id', \"container\" );\n    this.$elementJQ.addClass('container-class');\n    this.element = this.$elementJQ[0];\n    this.element.style.position = \"absolute\";\n\n    /* * * * * * * * * * * * * * * *\n     * * * * Member Methods  * * * *\n     * * * * * * * * * * * * * * * */\n    this.clearTheBoard = function() {\n\t\tfor ( let ii = 0; ii < this.coordinates.length; ii++ ) {\n\t\t    console.log(\"clearing board\");\n\t\t    delete this.coordinates[ii];\n\t\t}\n\t\tthis.coordinates = [];\n\t\tfor ( let ii = 0; ii < this.crates.length; ii++ ) {\n\t\t    delete this.crates[ii];\n\t\t}\n\t\tthis.crates = [];\n\t\tdelete this.sprite;\n\t\tthis.$elementJQ.empty();\n\t\tthis.winCondition = false;\n    };\n\n\n    // Chrome needs me to access parameter arrays this way.\n    this.updateCell = function( xy, tileType, tileURL, crateStatus) {\n\t\tthis.coordinates[ xy[0] ][ xy[1] ].tile = tileType;\n\t\tthis.coordinates[ xy[0] ][ xy[1] ].$img.attr( 'src', tileURL );\n\t\tthis.coordinates[ xy[0] ][ xy[1] ].hasCrate = crateStatus;\n    };\n\n    this.init = function( levelData ) {\n\t\tthis.boardData = levelData;\n\t\tthis.boardDimensionInPixels = this.boardData.dimension * cellWidth;\n\t\tthis.canvas.width = this.boardDimensionInPixels;\n\t\tthis.canvas.height = this.boardDimensionInPixels;\n\t\tthis.canvas.style.position = \"absolute\";\n\t\tthis.canvas.style.left = 0;\n\t\tthis.canvas.style.top = 0;\n\t\tthis.canvas.style.zIndex = \"10\";\n\n\t\tthis.element.style.left = 0;\n\t\tthis.element.style.top = 0;\n\t\tthis.element.style.zIndex = \"0\";\n\n\t\t// This is where we will change CSS element width and height\n\n\t\t// Clear any existing data\n\t\tthis.clearTheBoard();\n\n\t\tfor ( let ii = 0; ii < this.boardData.dimension; ii++ ) {\n\t\t    for ( let jj = 0; jj < this.boardData.dimension; jj++ ) {\n\t\t\tthis.coordinates.push( [ ] );\n\t\t\tthis.coordinates[jj].push( new Coord( \"wall\", wallURL ) );\n\t\t\tthis.$elementJQ.append( this.coordinates[jj][ii].$div );\n\t\t    }\n\t\t}\n\n\t\t// update floor tiles\n\t\tfor ( let ii = 0; ii < this.boardData.floor.length; ii++ ) {\n\t\t    this.updateCell(this.boardData.floor[ii], \"floor\", floorURL, false );\n\t\t}\n\t\t// update dot tiles\n\t\tfor ( let ii = 0; ii < this.boardData.dots.length; ii++ ) {\n\t\t    this.updateCell(this.boardData.dots[ii], \"dot\", dotsURL, false );\n\t\t}\n\n\t\t// make our crates\n\t\tfor ( let ii = 0; ii < this.boardData.crate.length; ii++ ) {\n\t\t    this.crates.push( new Crate( this.boardData.crate[ii] ) );\n\t\t    this.crates[ii].onDot =\n\t\t\tthis.coordinates[ this.boardData.crate[ii][0] ][ this.boardData.crate[ii][1] ].isADot();\n\t\t    this.coordinates[ this.boardData.crate[ii][0] ][ this.boardData.crate[ii][1] ].hasCrate = true;\n\t\t    if ( this.crates[ii].onDot) {\n\t\t\t\tthis.crates[ii].$crateImg.attr('src', crateOnDotURL );\n\t\t    }\n\n\t\t}\n\n\t\t// make a sprite\n\t\tthis.sprite = new Sprite( this.boardData.start );\n\n\t\tthis.draw();\n    };\n\n    this.findCrate = function( xy ) {\n\t\tfor ( let ii = 0; ii < this.crates.length; ii++ ) {\n\t\t    if ( xy[0] === this.crates[ii].x && xy[1] === this.crates[ii].y ) {\n\t\t\treturn ii;\n\t\t    }\n\t\t}\n\t\tconsole.log(\"Error: crate not found.\");\n    };\n\n    this.checkWinCondition = function() {\n\t\tvar onDotCounter = 0;\n\t\tfor ( let ii = 0; ii < this.crates.length; ii++ ) {\n\t\t    if ( this.crates[ii].onDot ) {\n\t\t\t\tonDotCounter++;\n\t\t    }\n\t\t}\n\t\tif ( onDotCounter === this.crates.length ) {\n\t\t    return true;\n\t\t} else {\n\t\t    return false;\n\t\t}\n    };\n\n    this.updateCrateStatus = function(crateIndex, oldPosition, newPosition) {\n\t\tthis.coordinates[ oldPosition[0] ][ oldPosition[1] ].hasCrate = false;\n\t\tthis.coordinates[ newPosition[0] ][ newPosition[1] ].hasCrate = true;\n\n\t\tif ( this.coordinates[ newPosition[0] ][ newPosition[1] ].isADot() ){\n\t\t\tthis.crates[crateIndex].onDot = true;\n\t\t\tthis.crates[crateIndex].$crateImg.attr('src', crateOnDotURL );\n\t\t} else {\n\t\t\tthis.crates[crateIndex].onDot = false;\n\t\t\tthis.crates[crateIndex].$crateImg.attr('src', crateURL );\n\t\t}\n\n\t\tthis.winCondition = this.checkWinCondition();\n    };\n\n    // draw our sprite and crates to the canvas\n    this.draw = function() {\n\t\tthis.context.clearRect(0, 0, this.canvas.width, this.canvas.height );\n\t\tfor ( let ii = 0; ii < this.crates.length; ii++ ) {\n\t\t\tthis.context.drawImage( this.crates[ii].$crateImg[0], this.crates[ii].x, this.crates[ii].y );\n\t\t}\n\t\tthis.context.drawImage(this.sprite.$img[0], this.sprite.x, this.sprite.y );\n    };\n\n    this.move = function(deltaXY, withCrate) {\n\t\tlistenToKeystrokes = false;\n\t\tvar x = this.sprite.x;\n\t\tvar y = this.sprite.y;\n\t\tvar self = this;\n\t\tvar draw = this.draw.bind(this);\n\t\tvar counter = 0;\n\t\tvar frames = cellWidth;\n\n\t\tif ( withCrate ) {\n\n\t\t    var crateIndex = self.findCrate([ x + deltaXY[0]*cellWidth ,  y + deltaXY[1]*cellWidth ]);\n\t\t    var xCrate = self.crates[crateIndex].x;\n\t\t    var yCrate = self.crates[crateIndex].y;\n\t\t}\n\n\t\tfunction drawFrame(fraction) {\n\t\t    // This looks weird, but we'll be sure that the sprite ends in\n\t\t    // a valid location when setTimeout calls drawFrame(1)\n\t\t    self.sprite.x = x + ( cellWidth * deltaXY[0] * fraction );\n\t\t    self.sprite.y = y + ( cellWidth * deltaXY[1] * fraction );\n\t\t    if ( withCrate ) {\n\t\t\tself.crates[crateIndex].x = xCrate + ( cellWidth * deltaXY[0] * fraction );\n\t\t\tself.crates[crateIndex].y = yCrate + ( cellWidth * deltaXY[1] * fraction );\n\t\t    }\n\t\t    requestAnimationFrame(draw);\n\t\t}\n\n\t\tvar interval = setInterval(function(){\n\t\t\tcounter++;\n\t\t\tdrawFrame(counter/frames);\n\t\t}, 256 / cellWidth );\n\n\t\tsetTimeout(function(){\n\t\t\tclearInterval(interval);\n\t\t\tdrawFrame(1);\n\t\t    if ( withCrate ) {\n\t\t\t\tself.updateCrateStatus(crateIndex, [xCrate/cellWidth, yCrate/cellWidth ],\n\t\t\t\t\t[ xCrate/cellWidth + deltaXY[0],  yCrate/cellWidth + deltaXY[1] ] );\n\t\t\t}\n\t\t\tself.sprite.stepCount++;\n\t\t\tlistenToKeystrokes = true;\n\t\t}, 256);\n    };\n\n    this.tryToMove = function( xy, deltaXY ) {\n\t\tvar x = xy[0];\n\t\tvar y = xy[1];\n\t\tvar dx = deltaXY[0];\n\t\tvar dy = deltaXY[1];\n\n\t\tvar nextLocation = this.coordinates[ x + dx ][ y + dy ];\n\t\tvar twoAway;\n\n\t\t// Make sure two spaces away is on the board\n\t\tif ( ( 0 <= x + 2*dx && x + 2*dx < this.boardData.dimension ) &&\n\t\t\t ( 0 <= y + 2*dy && y + 2*dy < this.boardData.dimension ) ) {\n\t\t\ttwoAway = this.coordinates[ x + 2*dx ][ y + 2*dy ];\n\t\t\ttwoAway.exists = true;\n\t\t} else {\n\t\t\t// Two spaces away would be off the board\n\t\t\ttwoAway = {};\n\t\t\ttwoAway.exists = false;\n\t\t}\n\n\t\tif ( nextLocation.tile === \"wall\" ) {\n\t\t\treturn;\n\t\t} else if ( nextLocation.hasCrate ) {\n\t\t\tif ( twoAway.exists && !twoAway.hasCrate && twoAway.tile !== \"wall\" ) {\n\t\t\t\t// move with crate\n\t\t\t\tthis.move(deltaXY, true);\n\t\t    }\n\t\t    return;\n\t\t} else if ( ( nextLocation.tile === \"floor\" ) ||\n\t\t\t\t\t( nextLocation.tile === \"dot\") ) {\n\t\t\tthis.move(deltaXY, false);\n\t\t\treturn;\n\t\t} else {\n\t\t\tconsole.log(\"error\");\n\t\t}\n    };\n}\n\nclass GameInstance {\n    constructor(anchor, level) {\n        this.$anchor = anchor;\n        this.user = new User();\n        this.game = new GameBoard();\n        this.$anchor.empty();\n        this.user.init();\n        this.game.init( levelData[this.user.difficulty][this.user.currentLevel] );\n        this.$anchor.append( this.game.$elementJQ );\n        this.$anchor.append( this.game.$canvasJQ );\n        $('#game').css( { 'width': this.game.boardDimensionInPixels - 10,\n                         'height': this.game.boardDimensionInPixels - 25 } );\n        $('#container').css( 'width', this.game.boardDimensionInPixels );\n        this.processInputHandler = this.processInput.bind(this);\n        this.scaleGameBoardHandler = this.scaleGameBoard.bind(this);    \n        this.scaleGameBoard();\n        this.eventListeners();\n        console.log(\"this:\", this);\n    }\n        \n    addCurrentStatus() {\n        $('#difficulty').empty();\n        $('#currentLevel').empty();\n        $('#stepCount').empty();\n        $('#startTxt').empty();\n        $('#difficulty').append('Difficulty: ' + this.user.difficulty)\n        $('#currentLevel').append('Level: ' + this.user.currentLevel)\n        $('#stepCount').append('Steps: ' + this.game.sprite.stepCount)\n\t}\n\t\n\tprocessInput(key) {\n\t\tlet keyvalue = key.keyCode;\n\t\t console.log(\"this, in processInput():\", this);\n\t\tlet xy = [ (this.game.sprite.x / cellWidth), (this.game.sprite.y / cellWidth) ];\n\t\tlet deltaXY;\n\n\t\t// Keep key input from scrolling\n\t\tkey.preventDefault();\n\n\t\tif ( this.game.winCondition ) {\n\t\t\tthis.onDone({\"goo\":\"gob\"});            //TODO: do something useful\n\t\t\t//this.advanceTheUser();\n\t\t\t//this.initializeGameBoard();\n\t\t} else if ( listenToKeystrokes ) {\n\t\t\tif (keyvalue === 37) {\n\t\t\t\tconsole.log(\"left\");\n\t\t\t\tdeltaXY = [ -1, 0 ];\n\t\t\t\tthis.game.tryToMove( xy, deltaXY );\n\t\t    } else if (keyvalue === 38) {\n\t\t\t\tconsole.log(\"up\");\n\t\t\t\tdeltaXY = [ 0, -1 ];\n\t\t\t\tthis.game.tryToMove( xy, deltaXY );\n\t\t    } else if (keyvalue === 39) {\n\t\t\t\tconsole.log(\"right\");\n\t\t\t\tdeltaXY = [ 1, 0 ];\n\t\t\t\tthis.game.tryToMove( xy, deltaXY );\n\t\t    } else if (keyvalue === 40) {\n\t\t\t\tconsole.log(\"down\");\n\t\t\t\tdeltaXY = [ 0, 1 ];\n\t\t\t\tthis.game.tryToMove( xy, deltaXY );\n\t\t    }\n\t\t    \n\t\t    if (keyvalue === 13) {\n\t\t\t\tthis.game.draw();\n\t\t    } else if (keyvalue === 32) {\n\t\t\t\t$('#gameplay').empty();\n\t\t    }\n\t\t    this.addCurrentStatus();\n\t\t}\n\t}\n\t\n\tscaleGameBoard() {\n\t\tconst buffer = ( $('header').height() + $('footer').height() ) * 2;\n\t\tconst frameHeight = $(window).height() - buffer;\n\t\tconst frameWidth = $(window).width();\n\t\tconst frameSize = Math.min( frameHeight, frameWidth );\n\t\tlet scale;\n\n\t\tif ( this.game.boardDimensionInPixels < frameSize ) {\n\t\t\tscale =  1;\n\t\t} else {\n\t\t\tscale = ( frameSize / this.game.boardDimensionInPixels ).toFixed(2);\n\t\t\tthis.$anchor.parent().css( 'transform', 'scale( ' + scale + ', ' + scale + ')');\n\t\t}\n\t}\n\t\n\teventListeners() {\n\t\twindow.addEventListener(\"keydown\", this.processInputHandler, false);\n\t\twindow.addEventListener(\"resize\",  this.scaleGameBoardHandler, false );\n\t}\n    \n    destroy() {\n        window.removeEventListener(\"keydown\", this.processInputHandler, false);\n\t\twindow.removeEventListener(\"resize\",  this.scaleGameBoardHandler, false );\n    }\n    \n/*  // I don't think I need this when the user is logged in\n    advanceTheUser() {\n        let winMessage = '<p id =\"winner\"> Congrats!!!! You beat level ' + (this.user.currentLevel + 1)  +\n            ' in ' + this.game.sprite.stepCount + ' steps. Press any key to move on to the next level. </p>';\n        $('#gameplay').empty();\n        $('#gameplay').append(winMessage);\n        \n        console.log( \"break: advanceTheUser \" );\n        if ( this.user.levelScores[this.user.difficulty][this.user.currentLevel] > this.game.sprite.stepCount\n             && 0 < this.user.levelScores[this.user.difficulty][this.user.currentLevel] ) {\n            this.user.levelScores[this.user.difficulty][this.user.currentLevel ] = this.game.sprite.stepCount;\n        }\n        if( this.user.currentLevel < ( levelData[this.user.difficulty].length - 1 ) ) {\n            this.user.levelScores[this.user.difficulty][this.user.currentLevel ] = this.game.sprite.stepCount;\n            this.user.currentLevel++;\n        } else if( this.user.difficulty === \"easy\"\n        \t       && this.user.currentLevel === levelData[this.user.difficulty].length -1) {\n            this.user.difficulty = \"hard\";\n            this.user.currentLevel = 0;\n        } else if( this.user.difficulty === \"hard\"\n                   && this.user.currentLevel === levelData[this.user.difficulty].length - 1 ) {\n            console.log(\"CONGRATULATIONS: You beat all the levels!\" );\n        } else {\n            console.log(\"Error: level index out of bounds\");\n        }\n    \n        this.user.saveData();\n\t};\n*/\n    \n}\n\n\nfunction createBoxxer(anchor) {\n\tvar my = {};\n\tmy.$anchor = anchor;\n\tmy.user = new User();\n\tmy.game = new GameBoard( );\n\n\tmy.initializeGameBoard = function() {\n\t\tmy.$anchor.empty();\n\t\tmy.user.init();\n\t\tmy.game.init( levelData[my.user.difficulty][my.user.currentLevel] );\n\t\tmy.$anchor.append( my.game.$elementJQ );\n\t\tmy.$anchor.append( my.game.$canvasJQ );\n\t\t$('#game').css( { 'width': my.game.boardDimensionInPixels - 10,\n\t\t\t\t  'height': my.game.boardDimensionInPixels - 25 } );\n\t\t$('#container').css( 'width', my.game.boardDimensionInPixels );\n\t};\n\n    //calling this without windowOnload fixed render onload error.\n    my.initializeGameBoard();\n\n\tmy.advanceTheUser = function () {\n        let winMessage = '<p id =\"winner\"> Congrats!!!! You beat level ' + (my.user.currentLevel + 1)  +\n            ' in ' + my.game.sprite.stepCount + ' steps. Press any key to move on to the next level. </p>';\n        $('#gameplay').empty();\n        $('#gameplay').append(winMessage);\n        \n        console.log( \"break: advanceTheUser \" );\n        if ( my.user.levelScores[my.user.difficulty][my.user.currentLevel] > my.game.sprite.stepCount\n             && 0 < my.user.levelScores[my.user.difficulty][my.user.currentLevel] ) {\n            my.user.levelScores[my.user.difficulty][my.user.currentLevel ] = my.game.sprite.stepCount;\n        }\n        if( my.user.currentLevel < ( levelData[my.user.difficulty].length - 1 ) ) {\n            my.user.levelScores[my.user.difficulty][my.user.currentLevel ] = my.game.sprite.stepCount;\n            my.user.currentLevel++;\n        } else if( my.user.difficulty === \"easy\"\n        \t       && my.user.currentLevel === levelData[my.user.difficulty].length -1) {\n            my.user.difficulty = \"hard\";\n            my.user.currentLevel = 0;\n        } else if( my.user.difficulty === \"hard\"\n                   && my.user.currentLevel === levelData[my.user.difficulty].length - 1 ) {\n            console.log(\"CONGRATULATIONS: You beat all the levels!\" );\n        } else {\n            console.log(\"Error: level index out of bounds\");\n        }\n    \n        my.user.saveData();\n\t};\n\n\tfunction addCurrentStatus() {\n        $('#difficulty').empty();\n        $('#currentLevel').empty();\n        $('#stepCount').empty();\n        $('#startTxt').empty();\n        $('#difficulty').append('Difficulty: ' + my.user.difficulty)\n        $('#currentLevel').append('Level: ' + my.user.currentLevel)\n        $('#stepCount').append('Steps: ' + my.game.sprite.stepCount)\n\t}\n\n\tmy.processInput = function(key) {\n\t\tlet keyvalue = key.keyCode;\n\t\tlet xy = [ (my.game.sprite.x / cellWidth), (my.game.sprite.y / cellWidth) ];\n\t\tlet deltaXY;\n\n\t\t// Keep key input from scrolling\n\t\tkey.preventDefault();\n\n\t\tif ( my.game.winCondition ) {\n\t\t\tmy.onDone({\"goo\":\"gob\"});            //TODO: return something useful\n\t\t\tmy.advanceTheUser();\n\t\t\tmy.initializeGameBoard();\n\t\t} else if ( listenToKeystrokes ) {\n\t\t\tif (keyvalue === 37) {\n\t\t\t\tconsole.log(\"left\");\n\t\t\t\tdeltaXY = [ -1, 0 ];\n\t\t\t\tmy.game.tryToMove( xy, deltaXY );\n\t\t    } else if (keyvalue === 38) {\n\t\t\t\tconsole.log(\"up\");\n\t\t\t\tdeltaXY = [ 0, -1 ];\n\t\t\t\tmy.game.tryToMove( xy, deltaXY );\n\t\t    } else if (keyvalue === 39) {\n\t\t\t\tconsole.log(\"right\");\n\t\t\t\tdeltaXY = [ 1, 0 ];\n\t\t\t\tmy.game.tryToMove( xy, deltaXY );\n\t\t    } else if (keyvalue === 40) {\n\t\t\t\tconsole.log(\"down\");\n\t\t\t\tdeltaXY = [ 0, 1 ];\n\t\t\t\tmy.game.tryToMove( xy, deltaXY );\n\t\t    }\n\n\t\t    if (keyvalue === 13) {\n\t\t\t\tmy.game.draw();\n\t\t    } else if (keyvalue === 32) {\n\t\t\t\t$('#gameplay').empty();\n\t\t    }\n\t\t    addCurrentStatus();\n\t\t}\n\n\t};\n\n\tmy.scaleGameBoard = function() {\n\t\tvar buffer = ( $('header').height() + $('footer').height() ) * 2;\n\t\tvar frameHeight = $(window).height() - buffer;\n\t\tvar frameWidth = $(window).width();\n\t\tvar frameSize = Math.min( frameHeight, frameWidth );\n\t\tvar scale;\n\n\t\tif ( my.game.boardDimensionInPixels < frameSize ) {\n\t\t\tscale =  1;\n\t\t} else {\n\t\t\tscale = ( frameSize / my.game.boardDimensionInPixels ).toFixed(2);\n\t\t\tmy.$anchor.parent().css( 'transform', 'scale( ' + scale + ', ' + scale + ')');\n\t\t}\n\t};\n\n\tmy.scaleGameBoard();\n\n\tmy.eventListeners= function() {\n\t\twindow.addEventListener(\"keydown\", my.processInput, false);\n\t\twindow.addEventListener(\"resize\",  my.scaleGameBoard, false );\n\t};\n\tmy.eventListeners();\n\n\treturn my;\n}\n"],"sourceRoot":"/source/"}