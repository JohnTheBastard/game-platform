{"version":3,"sources":["boxer.js"],"names":[],"mappings":"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","file":"boxer.js","sourcesContent":["/* * * * * * * * * * * * * *\n * PUSHES ROCKS GAME       *\n * Created by  John Hearn  *\n * CF401       March 2016  *\n * * * * * * * * * * * * * */\n \n'use strict';\nconst mobile = false;\nlet cellWidth;\nif(mobile) cellWidth = 16;\nelse       cellWidth = 32;\n\nlet listenToKeystrokes = true;\n\nconst rockURL = \"../img/boulder.png\";\nconst rockOnDotURL = \"../img/boulderondot.png\";\nconst wallURL = \"../img/dirt.png\";\nconst floorURL = \"../img/dirt2.png\";\nconst dotsURL  = \"../img/dirtDot.png\";\nconst spriteURL = \"../img/Sprite.gif\";\n\n/*\nconst pad = (num, size) => {\n\tlet s = num+\"\";\n\twhile (s.length < size) s = \"0\" + s;\n\treturn s;\n};\n\n\nconst removeClass = () => {\n\t$('#hiddenlist').removeClass('hide');\n\t$('#gameboyIMG').removeClass('hide');\n};\n\n\n// TODO: this doesn't belong to the game and probably doesn't need to exist at all.\nconst welcomeBack = () => {\n\tlet name = JSON.parse( localStorage.getItem( \"Name\" ) );\n\tvar welcome = ('<p class=\"welcome\"> Welcome back, ' + name + '. To continue ' +\n\t\t\t\t\t'playing from your last game, click the Gameboy or the \"Play\" tab above. ' +\n\t\t\t\t\t'If you would like to start over, please clear your web data. </p>');\n\t$('.initialParagraphs').remove();\n\t$('#user').replaceWith(welcome);\n};\n*/\n\nclass Player {\n    constructor() {\n        //this.currentLevel = 0;\n        //this.levelScores = { easy: [ ], hard: [ ] };\n        //this.difficulty = \"easy\";\n    }\n}\n\nfunction User() {\n\tthis.currentLevel = 0;\n\tthis.levelScores = { easy: [ ], hard: [ ] };\n\tthis.difficulty = \"easy\";\n\n\tthis.saveData = function() {\n\t\t// localStorage.setItem(\"Name\", JSON.stringify( this.name ) );\n\t\tlocalStorage.setItem(\"Level\", JSON.stringify( this.currentLevel ) );\n\t\tlocalStorage.setItem(\"Scores\", JSON.stringify( this.levelScores ) );\n\t\tlocalStorage.setItem(\"Difficulty\", JSON.stringify(this.difficulty ) );\n\t\tlocalStorage.setItem(\"Initialized\", JSON.stringify( 'true' ) );\n\t};\n\n\tthis.loadData = function() {\n\t\tthis.name = JSON.parse( localStorage.getItem( \"Name\" ) );\n\t\tthis.currentLevel = JSON.parse( localStorage.getItem( \"Level\" ) );\n\t\tthis.levelScores = JSON.parse( localStorage.getItem( \"Scores\" ) );\n\t\tthis.difficulty = JSON.parse( localStorage.getItem( \"Difficulty\" ) );\n\t};\n\n\n    this.init = function() {\n\t\t// My attempt to use Boolean() to cast our localStorage string\n\t\t// was returning true regardless of the value so I wrote my own.\n\t\tfunction castToBool(stringToCast) {\n\t\t    if( stringToCast === \"true\" ) {\n\t\t\t\treturn true;\n\t\t    } else if( stringToCast === \"false\" ) {\n\t\t\t\treturn false;\n\t\t    } else {\n\t\t\t\tconsole.log(\"Your attempt to cast \" + castToBool + \" to a boolean failed.\" );\n\t\t    }\n\t\t}\n\n\t\tthis.isInitialized = castToBool( JSON.parse(localStorage.getItem(\"Initialized\") ) );\n\n\t\tif ( !this.isInitialized ) {\n\t\t    console.log(\"false = \" + this.isInitialized + \" I'm not initialized.\");\n\t\t    for( let ii=0; ii < oldLevelData.easy.length; ii++ ) {\n\t\t\t\tthis.levelScores.easy[ii] = 0;\n\t\t    }\n\t\t    for( let ii=0; ii < oldLevelData.hard.length; ii++ ) {\n\t\t\t\tthis.levelScores.hard[ii] = 0;\n\t\t    }\n\t\t    this.saveData();\n\t\t} else {\n\t\t    //console.log( \"true = \" + this.isInitialized + \" I'm already initialized.\");\n\t\t    //removeClass();\n\t\t    this.loadData();\n\t\t    //welcomeBack();\n\t\t}\n    };\n}\n\nclass Coord {\n    constructor( tileType, tileURL ) {\n        this.$div = $( '<div></div>' );\n        this.$img = $( '<img></img>' );\n        this.tile = tileType;\n        this.$img.attr( 'src', tileURL );\n        this.$div.append( this.$img );\n        this.hasRock = false;\n    }\n    isADot() {\n\t\tif ( this.tile === \"dot\" ) return true;\n\t\telse return false;\n    }\n}\n\nclass Rock {\n    constructor( xy ) {\n        this.x = xy[0] * cellWidth;\n        this.y = xy[1] * cellWidth;\n        this.onDot = false;\n        this.$rockImg = $('<img></img>').attr('src', rockURL );\n    }\n} \n\nclass Sprite {\n    constructor( xy ) {\n        this.x = xy[0] * cellWidth;\n        this.y = xy[1] * cellWidth;\n        this.$img = $('<img></img>').attr('src', spriteURL );\n        this.stepCount = 0;\n    }\n\n}\n\nfunction GameBoard() {\n    this.winCondition = false;\n    this.coordinates = [];\n    this.rocks = [];\n\n    this.$canvasJQ = $('<canvas></canvas>');\n    this.canvas = this.$canvasJQ[0];\n    this.context = this.canvas.getContext(\"2d\");\n\n    this.$elementJQ = $('<section></section>').attr( 'id', \"container\" );\n    this.$elementJQ.addClass('container-class');\n    this.element = this.$elementJQ[0];\n    this.element.style.position = \"absolute\";\n\n    /* * * * * * * * * * * * * * * *\n     * * * * Member Methods  * * * *\n     * * * * * * * * * * * * * * * */\n    this.clearTheBoard = function() {\n\t\tfor ( let ii = 0; ii < this.coordinates.length; ii++ ) {\n\t\t    console.log(\"clearing board\");\n\t\t    delete this.coordinates[ii];\n\t\t}\n\t\tthis.coordinates = [];\n\t\tfor ( let ii = 0; ii < this.rocks.length; ii++ ) {\n\t\t    delete this.rocks[ii];\n\t\t}\n\t\tthis.rocks = [];\n\t\tdelete this.sprite;\n\t\tthis.$elementJQ.empty();\n\t\tthis.winCondition = false;\n    };\n\n\n    // Chrome needs me to access parameter arrays this way.\n    this.updateCell = function( xy, tileType, tileURL, rockStatus) {\n        xy[0] = Number( xy[0] );  //TODO: see if I actually need this\n        xy[1] = Number( xy[1] );        \n\t\tthis.coordinates[ xy[0] ][ xy[1] ].tile = tileType;\n\t\tthis.coordinates[ xy[0] ][ xy[1] ].$img.attr( 'src', tileURL );\n\t\tthis.coordinates[ xy[0] ][ xy[1] ].hasRock = rockStatus;\n    };\n\n    this.init = function( levelData ) {\n\t\tthis.boardData = levelData;\n\t\tthis.boardDimensionInPixels = this.boardData.dimension * cellWidth;\n\t\tthis.canvas.width = this.boardDimensionInPixels;\n\t\tthis.canvas.height = this.boardDimensionInPixels;\n\t\tthis.canvas.style.position = \"absolute\";\n\t\tthis.canvas.style.left = 0;\n\t\tthis.canvas.style.top = 0;\n\t\tthis.canvas.style.zIndex = \"10\";\n\n\t\tthis.element.style.left = 0;\n\t\tthis.element.style.top = 0;\n\t\tthis.element.style.zIndex = \"0\";\n\n\t\t// This is where we will change CSS element width and height\n\n\t\t// Clear any existing data\n\t\tthis.clearTheBoard();\n\n\t\tfor ( let ii = 0; ii < this.boardData.dimension; ii++ ) {\n\t\t    for ( let jj = 0; jj < this.boardData.dimension; jj++ ) {\n\t\t\tthis.coordinates.push( [ ] );\n\t\t\tthis.coordinates[jj].push( new Coord( \"wall\", wallURL ) );\n\t\t\tthis.$elementJQ.append( this.coordinates[jj][ii].$div );\n\t\t    }\n\t\t}\n        \n\t\t// update floor tiles\n\t\tfor ( let ii = 0; ii < this.boardData.floor.length; ii++ ) {\n\t\t    this.updateCell(this.boardData.floor[ii], \"floor\", floorURL, false );\n\t\t}\n\t\t// update dot tiles\n\t\tfor ( let ii = 0; ii < this.boardData.dots.length; ii++ ) {\n\t\t    this.updateCell(this.boardData.dots[ii], \"dot\", dotsURL, false );\n\t\t}\n\t\t// make our rocks\n\t\tfor ( let ii = 0; ii < this.boardData.rocks.length; ii++ ) {\n\t\t    this.rocks.push( new Rock( this.boardData.rocks[ii] ) );\n\t\t    this.rocks[ii].onDot = this.coordinates[ Number(this.boardData.rocks[ii][0]) ][ Number(this.boardData.rocks[ii][1]) ].isADot();\n\t\t    this.coordinates[ Number(this.boardData.rocks[ii][0]) ][ Number(this.boardData.rocks[ii][1]) ].hasRock = true;\n\t\t    if( this.rocks[ii].onDot) this.rocks[ii].$rockImg.attr('src', rockOnDotURL );\n\t\t}\n\t\t// make a sprite\n\t\tthis.sprite = new Sprite( this.boardData.start );\n\t\tthis.draw();\n    };\n\n    this.findRock = function( xy ) {\n\t\tfor ( let ii = 0; ii < this.rocks.length; ii++ ) {\n\t\t    if ( xy[0] === this.rocks[ii].x && xy[1] === this.rocks[ii].y ) {\n\t\t\treturn ii;\n\t\t    }\n\t\t}\n\t\tconsole.log(\"Error: rock not found.\");\n    };\n\n    this.checkWinCondition = function() {\n\t\tvar onDotCounter = 0;\n\t\tfor ( let ii = 0; ii < this.rocks.length; ii++ ) {\n\t\t    if ( this.rocks[ii].onDot ) {\n\t\t\t\tonDotCounter++;\n\t\t    }\n\t\t}\n\t\tif ( onDotCounter === this.rocks.length ) {\n\t\t    return true;\n\t\t} else {\n\t\t    return false;\n\t\t}\n    };\n\n    this.updateRockStatus = function( rockIndex, oldPosition, newPosition ) {\n\t\tthis.coordinates[ oldPosition[0] ][ oldPosition[1] ].hasRock = false;\n\t\tthis.coordinates[ newPosition[0] ][ newPosition[1] ].hasRock = true;\n\n\t\tif ( this.coordinates[ newPosition[0] ][ newPosition[1] ].isADot() ){\n\t\t\tthis.rocks[rockIndex].onDot = true;\n\t\t\tthis.rocks[rockIndex].$rockImg.attr('src', rockOnDotURL );\n\t\t} else {\n\t\t\tthis.rocks[rockIndex].onDot = false;\n\t\t\tthis.rocks[rockIndex].$rockImg.attr('src', rockURL );\n\t\t}\n\n\t\tthis.winCondition = this.checkWinCondition();\n    };\n\n    // draw our sprite and rocks to the canvas\n    this.draw = function() {\n\t\tthis.context.clearRect(0, 0, this.canvas.width, this.canvas.height );\n\t\tfor ( let ii = 0; ii < this.rocks.length; ii++ ) {\n\t\t\tthis.context.drawImage( this.rocks[ii].$rockImg[0], this.rocks[ii].x, this.rocks[ii].y );\n\t\t}\n\t\tthis.context.drawImage(this.sprite.$img[0], this.sprite.x, this.sprite.y );\n    };\n\n    this.move = function(deltaXY, withRock) {\n\t\tlistenToKeystrokes = false;\n\t\tvar x = this.sprite.x;\n\t\tvar y = this.sprite.y;\n\t\tvar self = this;\n\t\tvar draw = this.draw.bind(this);\n\t\tvar counter = 0;\n\t\tvar frames = cellWidth;\n\n\t\tif ( withRock ) {\n\n\t\t    var rockIndex = self.findRock([ x + deltaXY[0]*cellWidth ,  y + deltaXY[1]*cellWidth ]);\n\t\t    var xRock = self.rocks[rockIndex].x;\n\t\t    var yRock = self.rocks[rockIndex].y;\n\t\t}\n\n\t\tfunction drawFrame(fraction) {\n\t\t    // This looks weird, but we'll be sure that the sprite ends in\n\t\t    // a valid location when setTimeout calls drawFrame(1)\n\t\t    self.sprite.x = x + ( cellWidth * deltaXY[0] * fraction );\n\t\t    self.sprite.y = y + ( cellWidth * deltaXY[1] * fraction );\n\t\t    if ( withRock ) {\n\t\t\t    self.rocks[rockIndex].x = xRock + ( cellWidth * deltaXY[0] * fraction );\n                self.rocks[rockIndex].y = yRock + ( cellWidth * deltaXY[1] * fraction );\n\t\t    }\n\t\t    requestAnimationFrame(draw);\n\t\t}\n\n\t\tvar interval = setInterval(function(){\n\t\t\tcounter++;\n\t\t\tdrawFrame(counter/frames);\n\t\t}, 256 / cellWidth );\n\n\t\tsetTimeout(function(){\n\t\t\tclearInterval(interval);\n\t\t\tdrawFrame(1);\n\t\t    if ( withRock ) {\n\t\t\t\tself.updateRockStatus( rockIndex, [ xRock/cellWidth, yRock/cellWidth ],\n\t\t\t\t\t[ xRock/cellWidth + deltaXY[0],  yRock/cellWidth + deltaXY[1] ] );\n\t\t\t}\n\t\t\tself.sprite.stepCount++;\n\t\t\tlistenToKeystrokes = true;\n\t\t}, 256);\n    };\n\n    this.tryToMove = function( xy, deltaXY ) {\n\t\tvar x = xy[0];\n\t\tvar y = xy[1];\n\t\tvar dx = deltaXY[0];\n\t\tvar dy = deltaXY[1];\n\n\t\tvar nextLocation = this.coordinates[ x + dx ][ y + dy ];\n\t\tvar twoAway = {};\n\n\t\t// Make sure two spaces away is on the board\n\t\tif ( ( 0 <= x + 2*dx && x + 2*dx < this.boardData.dimension ) &&\n\t\t\t ( 0 <= y + 2*dy && y + 2*dy < this.boardData.dimension ) ) {\n\t\t\ttwoAway = this.coordinates[ x + 2*dx ][ y + 2*dy ];\n\t\t\ttwoAway.exists = true;\n\t\t} else {\n\t\t\t// Two spaces away would be off the board\n\t\t\ttwoAway.exists = false;\n\t\t}\n\n\t\tif ( nextLocation.tile === \"wall\" ) {\n\t\t\treturn;\n\t\t} else if ( nextLocation.hasRock ) {\n\t\t\tif ( twoAway.exists && !twoAway.hasRock && twoAway.tile !== \"wall\" ) {\n\t\t\t\t// move with rock\n\t\t\t\tthis.move(deltaXY, true);\n\t\t    }\n\t\t    return;\n\t\t} else if ( ( nextLocation.tile === \"floor\" ) ||\n\t\t\t\t\t( nextLocation.tile === \"dot\") ) {\n\t\t\tthis.move(deltaXY, false);\n\t\t\treturn;\n\t\t} else {\n\t\t\tconsole.log(\"error\");\n\t\t}\n    };\n}\n\nclass GameInstance {\n    constructor(anchor, level) {\n        this.$anchor = anchor;\n        //this.player = new Player( playerData );\n        this.user = new User();\n        this.game = new GameBoard();\n        this.$anchor.empty();\n        this.user.init();\n        \n        console.log( \"db/json:\", level );\n        console.log( \"js file:\", levelData[this.user.difficulty][this.user.currentLevel] );\n        \n        //this.game.init( levelData[this.user.difficulty][this.user.currentLevel] );\n        this.game.init(level);\n        this.$anchor.append( this.game.$elementJQ );\n        this.$anchor.append( this.game.$canvasJQ );\n        $('#game').css( { 'width': this.game.boardDimensionInPixels - 10,\n                         'height': this.game.boardDimensionInPixels - 25 } );\n        $('#container').css( 'width', this.game.boardDimensionInPixels );\n        this.processInputHandler = this.processInput.bind(this);\n        this.scaleGameBoardHandler = this.scaleGameBoard.bind(this);    \n        this.scaleGameBoard();\n        this.eventListeners();\n    }\n    \n    // this (mostly) should be handled by the game-controller\n    addCurrentStatus() {\n        $('#difficulty').empty();\n        $('#currentLevel').empty();\n        $('#stepCount').empty();\n        $('#startTxt').empty();  // does this even exist?\n        $('#difficulty').append('Difficulty: ' + this.user.difficulty);\n        $('#currentLevel').append('Level: ' + this.user.currentLevel);\n        $('#stepCount').append('Steps: ' + this.game.sprite.stepCount);  //this probably needs to live in-game\n\t}\n\t\n\tprocessInput(key) {\n\t\tlet keyvalue = key.keyCode;\n\t\tlet xy = [ (this.game.sprite.x / cellWidth), (this.game.sprite.y / cellWidth) ];\n\n\t\t// Keep key input from scrolling\n\t\tkey.preventDefault();\n\n\t\tif ( this.game.winCondition ) {\n\t\t\tthis.onDone({\"goo\":\"gob\"});            //TODO: do something useful\n\t\t\t//this.advanceTheUser();\n\t\t\t//this.initializeGameBoard();\n\t\t} else if ( listenToKeystrokes ) {\n\t\t\tlet deltaXY = [ 0, 0 ];\n\t\t\tif      ( keyvalue === 37 ) deltaXY = [ -1,  0 ];\n\t\t    else if ( keyvalue === 38 ) deltaXY = [  0, -1 ];\n\t\t    else if ( keyvalue === 39 ) deltaXY = [  1,  0 ];\n\t\t    else if ( keyvalue === 40 ) deltaXY = [  0,  1 ];\n\t\t    \n\t\t    this.game.tryToMove( xy, deltaXY );\n            this.addCurrentStatus();\n\t\t}\n\t}\n\t\n\tscaleGameBoard() {\n\t\tconst buffer = ( $('header').height() + $('footer').height() ) * 2;\n\t\tconst frameHeight = $(window).height() - buffer;\n\t\tconst frameWidth = $(window).width();\n\t\tconst frameSize = Math.min( frameHeight, frameWidth );\n\t\tlet scale;\n\n\t\tif ( this.game.boardDimensionInPixels < frameSize ) {\n\t\t\tscale =  1;\n\t\t} else {\n\t\t\tscale = ( frameSize / this.game.boardDimensionInPixels ).toFixed(2);\n\t\t\tthis.$anchor.parent().css( 'transform', 'scale( ' + scale + ', ' + scale + ')');\n\t\t}\n\t}\n\t\n\teventListeners() {\n\t\twindow.addEventListener(\"keydown\", this.processInputHandler, false);\n\t\twindow.addEventListener(\"resize\",  this.scaleGameBoardHandler, false );\n\t}\n    \n    destroy() {\n        window.removeEventListener(\"keydown\", this.processInputHandler, false);\n\t\twindow.removeEventListener(\"resize\",  this.scaleGameBoardHandler, false );\n    }\n    \n/*  // I don't think I need this when the user is logged in\n    advanceTheUser() {\n        let winMessage = '<p id =\"winner\"> Congrats!!!! You beat level ' + (this.user.currentLevel + 1)  +\n            ' in ' + this.game.sprite.stepCount + ' steps. Press any key to move on to the next level. </p>';\n        $('#gameplay').empty();\n        $('#gameplay').append(winMessage);\n        \n        console.log( \"break: advanceTheUser \" );\n        if ( this.user.levelScores[this.user.difficulty][this.user.currentLevel] > this.game.sprite.stepCount\n             && 0 < this.user.levelScores[this.user.difficulty][this.user.currentLevel] ) {\n            this.user.levelScores[this.user.difficulty][this.user.currentLevel ] = this.game.sprite.stepCount;\n        }\n        if( this.user.currentLevel < ( levelData[this.user.difficulty].length - 1 ) ) {\n            this.user.levelScores[this.user.difficulty][this.user.currentLevel ] = this.game.sprite.stepCount;\n            this.user.currentLevel++;\n        } else if( this.user.difficulty === \"easy\"\n        \t       && this.user.currentLevel === levelData[this.user.difficulty].length -1) {\n            this.user.difficulty = \"hard\";\n            this.user.currentLevel = 0;\n        } else if( this.user.difficulty === \"hard\"\n                   && this.user.currentLevel === levelData[this.user.difficulty].length - 1 ) {\n            console.log(\"CONGRATULATIONS: You beat all the levels!\" );\n        } else {\n            console.log(\"Error: level index out of bounds\");\n        }\n    \n        this.user.saveData();\n\t};\n*/\n    \n}\n"],"sourceRoot":"/source/"}