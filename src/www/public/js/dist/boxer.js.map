{"version":3,"sources":["boxer.js"],"names":[],"mappings":"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","file":"boxer.js","sourcesContent":["/* * * * * * * * * * * * * *\n * PUSHES ROCKS GAME       *\n * Created by  John Hearn  *\n * CF401       March 2016  *\n * * * * * * * * * * * * * */\n \n'use strict';\nconst pushesRocksConstants = {\n    urls: {\n        rock:      \"../img/boulder.png\",\n        rockOnDot: \"../img/boulderondot.png\",\n        wall:      \"../img/dirt.png\",\n        floor:     \"../img/dirt2.png\",\n        dot:       \"../img/dirtDot.png\",\n        sprite:    \"../img/Sprite.gif\"\n    },\n    cellWidth: 32\n};\n\n/* //move local storage to guest controller\nfunction User() {\n    this.currentLevel = 0;\n    this.levelScores = { easy: [ ], hard: [ ] };\n    this.difficulty = \"easy\";\n\n    this.saveData = function() {\n        // localStorage.setItem(\"Name\", JSON.stringify( this.name ) );\n        localStorage.setItem(\"Level\", JSON.stringify( this.currentLevel ) );\n        localStorage.setItem(\"Scores\", JSON.stringify( this.levelScores ) );\n        localStorage.setItem(\"Difficulty\", JSON.stringify(this.difficulty ) );\n        localStorage.setItem(\"Initialized\", JSON.stringify( 'true' ) );\n    };\n\n    this.loadData = function() {\n        this.name = JSON.parse( localStorage.getItem( \"Name\" ) );\n        this.currentLevel = JSON.parse( localStorage.getItem( \"Level\" ) );\n        this.levelScores = JSON.parse( localStorage.getItem( \"Scores\" ) );\n        this.difficulty = JSON.parse( localStorage.getItem( \"Difficulty\" ) );\n    };\n\n\n    this.init = function() {\n        // My attempt to use Boolean() to cast our localStorage string\n        // was returning true regardless of the value so I wrote my own.\n        function castToBool(stringToCast) {\n            if( stringToCast === \"true\" ) {\n                return true;\n            } else if( stringToCast === \"false\" ) {\n                return false;\n            } else {\n                console.log(\"Your attempt to cast \" + castToBool + \" to a boolean failed.\" );\n            }\n        }\n\n        this.isInitialized = castToBool( JSON.parse(localStorage.getItem(\"Initialized\") ) );\n\n        if ( !this.isInitialized ) {\n            console.log(\"false = \" + this.isInitialized + \" I'm not initialized.\");\n            for( let ii=0; ii < oldLevelData.easy.length; ii++ ) {\n                this.levelScores.easy[ii] = 0;\n            }\n            for( let ii=0; ii < oldLevelData.hard.length; ii++ ) {\n                this.levelScores.hard[ii] = 0;\n            }\n            this.saveData();\n        } else {\n            this.loadData();\n        }\n    };\n}\n*/\n\n\nclass Coord {\n    constructor( tileType, tileURL ) {\n        this.$div = $( '<div></div>' );\n        this.$img = $( '<img></img>' );\n        this.tile = tileType;\n        this.$img.attr( 'src', tileURL );\n        this.$div.append( this.$img );\n        this.hasRock = false;\n    }\n    isADot() {\n        if ( this.tile === \"dot\" ) return true;\n        else return false;\n    }\n}\n\nclass Rock {\n    constructor( xy ) {\n        this.x = xy[0] * pushesRocksConstants.cellWidth;\n        this.y = xy[1] * pushesRocksConstants.cellWidth;\n        this.onDot = false;\n        this.$rockImg = $('<img></img>').attr('src', pushesRocksConstants.urls.rock );\n    }\n} \n\nclass Sprite {\n    constructor( xy ) {\n        this.x = xy[0] * pushesRocksConstants.cellWidth;\n        this.y = xy[1] * pushesRocksConstants.cellWidth;\n        this.$img = $('<img></img>').attr('src', pushesRocksConstants.urls.sprite );\n        this.stepCount = 0;\n    }\n\n}\n\nclass GameBoard {\n    constructor(levelData) {\n        this.listenToKeystrokes = true;\n        this.winCondition = false;\n        this.coordinates = [];\n        this.rocks = [];\n        \n        this.$canvasJQ = $('<canvas></canvas>');\n        this.canvas = this.$canvasJQ[0];\n        this.context = this.canvas.getContext(\"2d\");\n        \n        this.$elementJQ = $('<section></section>').attr( 'id', \"container\" );\n        this.$elementJQ.addClass('container-class');\n        this.element = this.$elementJQ[0];\n        this.element.style.position = \"absolute\";\n        \n        this.boardData = levelData;\n        this.boardDimensionInPixels = this.boardData.dimension * pushesRocksConstants.cellWidth;\n        this.canvas.width = this.boardDimensionInPixels;\n        this.canvas.height = this.boardDimensionInPixels;\n        this.canvas.style.position = \"absolute\";\n        this.canvas.style.left = 0;\n        this.canvas.style.top = 0;\n        this.canvas.style.zIndex = \"10\";\n        \n        this.element.style.left = 0;\n        this.element.style.top = 0;\n        this.element.style.zIndex = \"0\";\n        \n        for ( let ii = 0; ii < this.boardData.dimension; ii++ ) {\n            for ( let jj = 0; jj < this.boardData.dimension; jj++ ) {\n                this.coordinates.push( [ ] );\n                this.coordinates[jj].push( new Coord( \"wall\", pushesRocksConstants.urls.wall ) );\n                this.$elementJQ.append( this.coordinates[jj][ii].$div );\n            }\n        }\n        \n        // update floor tiles\n        this.boardData.floor.forEach( tile => this.updateCell( tile, \"floor\", pushesRocksConstants.urls.floor, false ) );\n\n        // update dot tiles\n        this.boardData.dots.forEach( tile => this.updateCell( tile, \"dot\", pushesRocksConstants.urls.dot, false ) );\n\n        // make our rocks\n        this.boardData.rocks.forEach( rock => {\n            this.rocks.push( new Rock(rock) );\n            //TODO: fix model so coords are numbers not strings.\n            rock.onDot = this.coordinates[ Number(rock[0]) ][ Number(rock[1]) ].isADot();\n            this.coordinates[ Number(rock[0]) ][ Number(rock[1]) ].hasRock = true;\n            if( rock.onDot) rock.$rockImg.attr('src', pushesRocksConstants.urls.rockOnDot );\n        });\n\n        // make a sprite\n        this.sprite = new Sprite( this.boardData.start );\n        this.draw();\n    }\n    \n    // Probably no need for this anymore\n    clearTheBoard() {\n        for ( let ii = 0; ii < this.coordinates.length; ii++ ) {\n            //console.log(\"clearing board\");\n            delete this.coordinates[ii];\n        }\n        this.coordinates = [];\n        for ( let ii = 0; ii < this.rocks.length; ii++ ) {\n            delete this.rocks[ii];\n        }\n        this.rocks = [];\n        delete this.sprite;\n        this.$elementJQ.empty();\n        this.winCondition = false;\n    }\n    \n    updateCell( xy, tileType, tileURL, rockStatus) {\n        xy[0] = Number( xy[0] );  //TODO: this should be fixed in the model\n        xy[1] = Number( xy[1] );        \n        this.coordinates[ xy[0] ][ xy[1] ].tile = tileType;\n        this.coordinates[ xy[0] ][ xy[1] ].$img.attr( 'src', tileURL );\n        this.coordinates[ xy[0] ][ xy[1] ].hasRock = rockStatus;\n    }\n    \n    findRock( xy ) {\n        for ( let ii = 0; ii < this.rocks.length; ii++ ) {\n            if ( xy[0] === this.rocks[ii].x && xy[1] === this.rocks[ii].y ) return ii;\n        }\n        console.log(\"Error: rock not found.\");\n    }\n    \n    checkWinCondition() {\n        let onDotCounter = 0;\n        for ( let ii = 0; ii < this.rocks.length; ii++ ) {\n            if ( this.rocks[ii].onDot ) onDotCounter++;\n        }\n        \n        if( onDotCounter === this.rocks.length ) return true;\n        else return false;\n    }\n    \n    updateRockStatus( rockIndex, oldPosition, newPosition ) {\n        this.coordinates[ oldPosition[0] ][ oldPosition[1] ].hasRock = false;\n        this.coordinates[ newPosition[0] ][ newPosition[1] ].hasRock = true;\n        \n        if( this.coordinates[ newPosition[0] ][ newPosition[1] ].isADot() ){\n            this.rocks[rockIndex].onDot = true;\n            this.rocks[rockIndex].$rockImg.attr('src', pushesRocksConstants.urls.rockOnDot );\n        } else {\n            this.rocks[rockIndex].onDot = false;\n            this.rocks[rockIndex].$rockImg.attr('src', pushesRocksConstants.urls.rock );\n        }\n        \n        this.winCondition = this.checkWinCondition();\n    }\n    \n    draw() {\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height );\n        for ( let ii = 0; ii < this.rocks.length; ii++ ) {\n            this.context.drawImage( this.rocks[ii].$rockImg[0], this.rocks[ii].x, this.rocks[ii].y );\n        }\n        this.context.drawImage(this.sprite.$img[0], this.sprite.x, this.sprite.y );\n    }\n    \n    tryToMove( xy, deltaXY ) {\n        let x = xy[0];\n        let y = xy[1];\n        let dx = deltaXY[0];\n        let dy = deltaXY[1];\n        let nextLocation = this.coordinates[ x + dx ][ y + dy ];\n        let twoAway = {};\n        \n        // Make sure two spaces away is on the board\n        if( ( 0 <= x + 2*dx && x + 2*dx < this.boardData.dimension ) &&\n            ( 0 <= y + 2*dy && y + 2*dy < this.boardData.dimension ) ) {\n            twoAway = this.coordinates[ x + 2*dx ][ y + 2*dy ];\n            twoAway.exists = true;\n        } else {\n            // Two spaces away would be off the board\n            twoAway.exists = false;\n        }\n        \n        if( nextLocation.tile === \"wall\" ) {\n            return;\n        } else if( nextLocation.hasRock ) {\n            if( twoAway.exists && !twoAway.hasRock && twoAway.tile !== \"wall\" ) {\n                // move with rock\n                this.sprite.stepCount++;\n                this.move(deltaXY, true);\n            }\n            return;\n        } else if( ( nextLocation.tile === \"floor\" ) ||\n                    ( nextLocation.tile === \"dot\") ) {\n            this.sprite.stepCount++;\n            this.move(deltaXY, false);\n            return;\n        } else {\n            console.log(\"error\");\n        }\n    }\n    \n    move( deltaXY, withRock ) {\n        this.listenToKeystrokes = false;\n        let x = this.sprite.x;\n        let y = this.sprite.y;\n        let self = this;\n        let draw = this.draw.bind(this);\n        let counter = 0;\n        let frames = pushesRocksConstants.cellWidth;\n        \n        if( withRock ) {\n            var rockIndex = self.findRock([ x + deltaXY[0]*pushesRocksConstants.cellWidth ,  y + deltaXY[1]*pushesRocksConstants.cellWidth ]);\n            var xRock = self.rocks[rockIndex].x;\n            var yRock = self.rocks[rockIndex].y;\n        }\n        \n        function drawFrame(fraction) {\n            // This looks weird, but we'll be sure that the sprite ends in\n            // a valid location when setTimeout calls drawFrame(1)\n            self.sprite.x = x + ( pushesRocksConstants.cellWidth * deltaXY[0] * fraction );\n            self.sprite.y = y + ( pushesRocksConstants.cellWidth * deltaXY[1] * fraction );\n            if( withRock ) {\n                self.rocks[rockIndex].x = xRock + ( pushesRocksConstants.cellWidth * deltaXY[0] * fraction );\n                self.rocks[rockIndex].y = yRock + ( pushesRocksConstants.cellWidth * deltaXY[1] * fraction );\n            }\n            requestAnimationFrame(draw);\n        }\n        \n        let interval = setInterval( () => {\n            counter++;\n            drawFrame(counter/frames);\n        }, 256 / pushesRocksConstants.cellWidth );\n        \n        setTimeout(() => {\n            clearInterval(interval);\n            drawFrame(1);\n            if ( withRock ) {\n                self.updateRockStatus( rockIndex, [ xRock/pushesRocksConstants.cellWidth, yRock/pushesRocksConstants.cellWidth ],\n                                       [ xRock/pushesRocksConstants.cellWidth + deltaXY[0],  yRock/pushesRocksConstants.cellWidth + deltaXY[1] ] );\n            }\n            this.listenToKeystrokes = true;\n        }, 256);\n    }\n}\n\nclass GameInstance {\n    constructor(anchor, level) {\n        this.$anchor = anchor;\n        this.game = new GameBoard(level);\n        this.$anchor.empty();\n        this.$anchor.append( this.game.$elementJQ );\n        this.$anchor.append( this.game.$canvasJQ );\n        $('#game').css( { 'width': this.game.boardDimensionInPixels - 10,\n                         'height': this.game.boardDimensionInPixels - 25 } );\n        $('#container').css( 'width', this.game.boardDimensionInPixels );\n        this.processInputHandler = this.processInput.bind(this);\n        this.scaleGameBoardHandler = this.scaleGameBoard.bind(this);    \n        this.scaleGameBoard();\n        this.eventListeners();\n    }\n    \n    processInput(key) {\n        let keyvalue = key.keyCode;\n        let xy = [ (this.game.sprite.x / pushesRocksConstants.cellWidth), (this.game.sprite.y / pushesRocksConstants.cellWidth) ];\n        \n        // Keep key input from scrolling\n        key.preventDefault();\n        \n        if ( this.game.winCondition ) {\n            this.onDone({\"goo\":\"gob\"});            //TODO: do something useful\n            this.game.clearTheBoard();\n\n        } else if ( this.game.listenToKeystrokes ) {\n            let deltaXY = false;\n            if      ( keyvalue === 37 ) deltaXY = [ -1,  0 ];\n            else if ( keyvalue === 38 ) deltaXY = [  0, -1 ];\n            else if ( keyvalue === 39 ) deltaXY = [  1,  0 ];\n            else if ( keyvalue === 40 ) deltaXY = [  0,  1 ];\n            \n            if( deltaXY ) {\n                this.game.tryToMove( xy, deltaXY );\n                this.updateStepCount( this.game.sprite.stepCount );\n            }\n        }\n    }\n    \n    scaleGameBoard() {\n        const buffer = ( $('header').height() + $('footer').height() ) * 2;\n        const frameHeight = $(window).height() - buffer;\n        const frameWidth = $(window).width();\n        const frameSize = Math.min( frameHeight, frameWidth );\n        let scale;\n\n        if ( this.game.boardDimensionInPixels < frameSize ) {\n            scale =  1;\n        } else {\n            scale = ( frameSize / this.game.boardDimensionInPixels ).toFixed(2);\n            this.$anchor.parent().css( 'transform', 'scale( ' + scale + ', ' + scale + ')');\n        }\n    }\n    \n    eventListeners() {\n        window.addEventListener(\"keydown\", this.processInputHandler, false);\n        window.addEventListener(\"resize\",  this.scaleGameBoardHandler, false );\n    }\n    \n    destroy() {\n        window.removeEventListener(\"keydown\", this.processInputHandler, false);\n        window.removeEventListener(\"resize\",  this.scaleGameBoardHandler, false );\n    }\n}\n"],"sourceRoot":"/source/"}